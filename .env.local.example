# AutoLlama v2.3.4 - Pure Local Mode Configuration
# ZERO EXTERNAL DEPENDENCIES - Complete Air-Gapped Deployment
# 
# Quick Setup:
#   1. Copy this file to .env.local
#   2. Set your OpenAI API key (only external dependency, optional for offline models)
#   3. Run: docker-compose -f docker-compose.local.yml up -d
#   4. Access: http://localhost:8080

# =============================================================================
# DEPLOYMENT MODE CONFIGURATION
# =============================================================================
# CRITICAL: This enforces air-gapped local mode
VECTOR_DB_MODE=local
VECTOR_DB_MODE_LOCKED=false

# Set to 'true' to prevent accidental mode changes in production
# VECTOR_DB_MODE_LOCKED=true

# =============================================================================
# AI SERVICES (Only External Dependency)
# =============================================================================
# OpenAI API Key - Required for AI features
# Get yours from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Contextual Embeddings (Enhanced Processing)
ENABLE_CONTEXTUAL_EMBEDDINGS=true
CONTEXTUAL_EMBEDDING_MODEL=gpt-4o-mini

# =============================================================================
# LOCAL SERVICES CONFIGURATION
# =============================================================================
# Local PostgreSQL Database
DATABASE_URL=postgresql://autollama:autollama_secure_password@localhost:5432/autollama

# Local Qdrant Vector Database (NO API KEY NEEDED)
QDRANT_LOCAL_URL=http://localhost:6333
QDRANT_COLLECTION=autollama-content

# Local Redis Cache
REDIS_URL=redis://localhost:6379

# =============================================================================
# ENTERPRISE SECURITY SETTINGS
# =============================================================================
# Disable all telemetry and external analytics
TELEMETRY_DISABLED=true
ANALYTICS_DISABLED=true

# Debug Configuration (disable in production)
DEBUG_MODE=false
LOG_LEVEL=info

# =============================================================================
# PERFORMANCE TUNING (64GB RAM System)
# =============================================================================
# Document Processing Configuration
MAX_FILE_SIZE=100MB
CHUNK_SIZE_MIN=100
CHUNK_SIZE_MAX=5000
CHUNK_OVERLAP_DEFAULT=200

# Context Generation Settings
CONTEXT_GENERATION_BATCH_SIZE=10
MAX_CONTEXT_LENGTH=2000

# Processing Limits
SESSION_CLEANUP_INTERVAL=300
SESSION_CLEANUP_THRESHOLD=15
MAX_CONCURRENT_UPLOADS=5

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
# Frontend Configuration
FRONTEND_URL=http://localhost:8080
ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080

# API Server Configuration
PORT=3001
WS_PORT=3003

# =============================================================================
# ENTERPRISE FEATURES (Optional)
# =============================================================================
# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# =============================================================================
# CLOUD MODE VARIABLES (DISABLED IN LOCAL MODE)
# =============================================================================
# These are ignored when VECTOR_DB_MODE=local but kept for reference
# QDRANT_URL=https://your-cluster.qdrant.io
# QDRANT_API_KEY=your_qdrant_api_key

# =============================================================================
# ENTERPRISE INTEGRATION (Optional)
# =============================================================================
# LDAP/Active Directory Integration
# LDAP_ENABLED=false
# LDAP_URL=ldap://your-domain-controller
# LDAP_BIND_DN=cn=admin,dc=company,dc=com
# LDAP_BIND_PASSWORD=your_password
# LDAP_SEARCH_BASE=ou=users,dc=company,dc=com

# Single Sign-On (SSO)
# SSO_ENABLED=false
# SSO_PROVIDER=saml
# SSO_ENTITY_ID=autollama-local
# SSO_SSO_URL=https://your-sso-provider/sso
# SSO_CERT_PATH=/app/certs/sso.crt

# =============================================================================
# HARDWARE OPTIMIZATION
# =============================================================================
# Reference Hardware: 2x Intel Xeon, 64GB RAM, 2x RTX 3060 (12GB VRAM each)
# These settings are optimized for this configuration

# Memory Allocation
POSTGRES_SHARED_BUFFERS=4GB
POSTGRES_EFFECTIVE_CACHE_SIZE=12GB
POSTGRES_WORK_MEM=64MB

QDRANT_MEMORY_THRESHOLD=8GB
QDRANT_MAX_SEARCH_THREADS=8
QDRANT_MAX_OPTIMIZATION_THREADS=4

REDIS_MAXMEMORY=4gb

# CPU Configuration
API_CLUSTER_WORKERS=4
BM25_WORKERS=2

# =============================================================================
# COMPLIANCE & SECURITY
# =============================================================================
# Data Classification
DATA_CLASSIFICATION=INTERNAL
ENCRYPTION_AT_REST=true
ENCRYPTION_IN_TRANSIT=true

# Compliance Standards
COMPLIANCE_MODE=enterprise
GDPR_COMPLIANCE=true
HIPAA_COMPLIANCE=false
SOC2_COMPLIANCE=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
CONTENT_SECURITY_POLICY=strict
X_FRAME_OPTIONS=DENY

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus Metrics (Local only)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Log Configuration
LOG_FORMAT=json
LOG_ROTATION_SIZE=50MB
LOG_RETENTION_FILES=5