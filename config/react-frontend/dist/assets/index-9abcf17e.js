var k=(t,a,i)=>new Promise((n,l)=>{var x=s=>{try{y(i.next(s))}catch(c){l(c)}},r=s=>{try{y(i.throw(s))}catch(c){l(c)}},y=s=>s.done?n(s.value):Promise.resolve(s.value).then(x,r);y((i=i.apply(t,a)).next())});import{u as D,j as e}from"./index-220525ce.js";import{r as C}from"./vendor-146ef102.js";import{C as B}from"./ChunkInspector-a70ce0cb.js";import{V as oe}from"./ChunkInspector-a70ce0cb.js";import O from"./ErrorBoundary-07f84f3a.js";import{F as A,x as R,v as I,o as V,C as F,y as U,g as E,e as L,L as M,b as _,A as Q}from"./icons-521df13f.js";import"./utils-d9662bcb.js";const G=t=>{if(!t)return null;try{if(t.startsWith("file://"))return t.replace("file://","");const n=new URL(t).pathname.split("/").pop();return n&&n.includes(".")?decodeURIComponent(n):t.replace(/^https?:\/\//,"")}catch(a){const i=t.split("/"),n=i[i.length-1];return n&&n.includes(".")?decodeURIComponent(n):t.replace(/^(https?:\/\/|file:\/\/)/,"")}},K=(t,a=50)=>{if(!t||t.length<=a)return t;const i=t.lastIndexOf(".");if(i>0&&t.length-i<8){const n=t.substring(0,i),l=t.substring(i),x=a-l.length-3;if(x>10)return`${n.substring(0,x)}...${l}`}return`${t.substring(0,a-3)}...`},H=({document:t,chunks:a})=>{const i=()=>{const s={},c=a.filter(p=>(p.status==="completed"||p.status==="complete")&&p.index!==-1);return c.forEach(p=>{const o=p.mainTopics;o&&Array.isArray(o)&&o.length>0&&o.forEach(h=>{s[h]=(s[h]||0)+1})}),Object.entries(s).map(([p,o])=>({topic:p,frequency:o,confidence:Math.min(.95,.5+o/Math.max(c.length,1)*.45)})).sort((p,o)=>o.frequency-p.frequency).slice(0,6)},n=()=>{if(!a.length)return{contextual:0,entity:0,sentiment:0};const s=a.filter(h=>(h.status==="completed"||h.status==="complete")&&h.index!==-1);if(!s.length)return{contextual:0,entity:0,sentiment:0};const c=s.filter(h=>h.contextualSummary).length,p=s.filter(h=>{const f=h.keyEntities;return f&&typeof f=="object"&&Object.keys(f).length>0}).length,o=s.filter(h=>h.sentiment&&h.sentiment!=="neutral").length;return{contextual:Math.round(c/s.length*100),entity:Math.round(p/s.length*100),sentiment:Math.round(o/s.length*100)}},l=()=>{if(!a.length)return{strengths:[],observations:[],ragReadiness:[]};const s=a.filter(d=>(d.status==="completed"||d.status==="complete")&&d.index!==-1);if(!s.length)return{strengths:["Document processing initiated"],observations:["Analysis in progress - detailed insights available after processing completes"],ragReadiness:["Preparing for semantic search capabilities"]};const c=s.map(d=>d.sentiment).filter(Boolean),p=s.flatMap(d=>d.emotions||[]),o=s.flatMap(d=>{const P=d.keyEntities;return P?Object.values(P).flat():[]}),h=s.flatMap(d=>d.mainTopics||[]),f=s.map(d=>d.contentType).filter(Boolean),b=s.map(d=>d.technicalLevel).filter(Boolean),w=s.map(d=>d.category).filter(Boolean),m=[],g=[],u=[];if(o.length>s.length*.5){const d=[...new Set(o)];m.push(`Rich entity network (${d.length} unique entities identified)`)}if(h.length>s.length*.7){const d=[...new Set(h)];m.push(`Comprehensive topic coverage (${d.length} distinct topics)`)}s.filter(d=>d.contextualSummary).length>s.length*.8&&m.push("Enhanced contextual embeddings for improved retrieval accuracy");const j=c.filter(d=>d==="positive").length,v=c.filter(d=>d==="neutral").length;c.filter(d=>d==="negative").length,j>c.length*.6?m.push("Predominantly positive content tone"):v>c.length*.7&&m.push("Objective, informational content style");const S=[...new Set(f)],N=[...new Set(w)],$=[...new Set(b)];if(S.length>1?g.push(`Multi-format content: ${S.join(", ")}`):S[0]&&g.push(`Consistent ${S[0]} content type`),N.length>0&&g.push(`Primary subject areas: ${N.slice(0,3).join(", ")}`),$.length>1?g.push(`Varied complexity levels: ${$.join(", ")}`):$[0]&&g.push(`${$[0].charAt(0).toUpperCase()+$[0].slice(1)} technical level throughout`),p.length>0){const d=[...new Set(p)];g.push(`Emotional depth detected: ${d.slice(0,3).join(", ")}`)}const z=Math.round(s.filter(d=>d.contextualSummary).length/s.length*100);return z>70&&u.push(`${z}% contextual enhancement coverage`),o.length>0&&u.push(`Entity-relationship mapping for ${o.length} extracted entities`),h.length>0&&u.push(`Topic-based retrieval for ${[...new Set(h)].length} semantic themes`),u.push(`Optimized ${s.length}-chunk structure for vector search`),m.length===0&&m.push("Successfully processed and embedded for semantic search"),g.length===0&&g.push("Standard content structure with consistent formatting"),u.length===0&&u.push("Ready for AI-powered question answering"),{strengths:m,observations:g,ragReadiness:u}},x=i(),r=n(),y=l();return a.filter(s=>(s.status==="completed"||s.status==="complete")&&s.index!==-1),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Topic Distribution"}),e.jsx("div",{className:"space-y-3",children:x.length>0?x.map((s,c)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:s.topic}),e.jsxs("span",{className:"text-gray-400",children:[s.frequency," mentions"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-primary-500 rounded-full",style:{width:`${s.confidence*100}%`}})})]},c)):e.jsxs("div",{className:"text-center py-4 text-gray-400",children:[e.jsx(E,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.some(s=>s.status==="processing")?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Topics are being analyzed..."}),e.jsx("p",{className:"text-xs",children:"AI analysis in progress. Topics will appear as chunks complete processing."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No topics detected in chunks"}),e.jsx("p",{className:"text-xs",children:"Topics may not be available for this document"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Processing Quality"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Contextual Enhancement"}),e.jsxs("span",{className:"text-green-400",children:[r.contextual,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-green-500 rounded-full",style:{width:`${r.contextual}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Entity Recognition"}),e.jsxs("span",{className:"text-blue-400",children:[r.entity,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${r.entity}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Sentiment Analysis"}),e.jsxs("span",{className:"text-purple-400",children:[r.sentiment,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-purple-500 rounded-full",style:{width:`${r.sentiment}%`}})})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Comprehensive Analysis Report"}),e.jsxs("div",{className:"prose prose-invert max-w-none",children:[e.jsx("p",{className:"text-gray-300 leading-relaxed",children:(()=>{const s=a.filter(b=>(b.status==="completed"||b.status==="complete")&&b.index!==-1),c=a.length-s.length;if(s.length===0)return`This document is currently being processed using AutoLlama's advanced contextual embedding system. ${a.length} chunks are being analyzed for topics, entities, and semantic relationships.`;const p=[...new Set(s.flatMap(b=>b.mainTopics||[]))],o=[...new Set(s.map(b=>b.category).filter(Boolean))],h=[...new Set(s.map(b=>b.contentType).filter(Boolean))];let f=`Analysis of ${(t==null?void 0:t.title)||"this document"} reveals ${s.length} processed chunks`;return c>0&&(f+=` (${c} still processing)`),p.length>0&&(f+=` covering primary topics: ${p.slice(0,3).join(", ")}`,p.length>3&&(f+=` and ${p.length-3} others`)),o.length>0&&(f+=`. Content categorized as ${o.join(", ")}`),h.length>0&&(f+=` with ${h.join(", ")} formatting`),f+=". Enhanced with contextual embeddings for superior retrieval accuracy.",f})()}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:"Strengths"}),e.jsx("ul",{className:"text-sm text-blue-200 space-y-1",children:y.strengths.length>0?y.strengths.map((s,c)=>e.jsxs("li",{children:["• ",s]},c)):e.jsx("li",{children:"• Content successfully processed"})})]}),e.jsxs("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-yellow-300 mb-2",children:"Observations"}),e.jsx("ul",{className:"text-sm text-yellow-200 space-y-1",children:y.observations.length>0?y.observations.map((s,c)=>e.jsxs("li",{children:["• ",s]},c)):e.jsx("li",{children:"• Consistent content structure"})})]}),e.jsxs("div",{className:"bg-green-900 bg-opacity-20 border border-green-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-2",children:"RAG Readiness"}),e.jsx("ul",{className:"text-sm text-green-200 space-y-1",children:y.ragReadiness.map((s,c)=>e.jsxs("li",{children:["• ",s]},c))})]})]})]})]})]})},W=()=>{const{selectedDocument:t,handleBackToDashboard:a,api:i}=D(),[n,l]=C.useState([]),[x,r]=C.useState(!0),[y,s]=C.useState(null),[c,p]=C.useState(0),[o,h]=C.useState("overview");C.useEffect(()=>{t&&f()},[t]);const f=()=>k(void 0,null,function*(){if(t!=null&&t.url){r(!0);try{const m=btoa(t.url),g=yield i.documents.getChunks(m,{limit:1e3}),u=(g==null?void 0:g.chunks)||[];l(u)}catch(m){}finally{r(!1)}}}),b=(m,g)=>{const u=m.index!==void 0?m.index+1:g+1;p(u),s(m)},w=m=>k(void 0,null,function*(){try{p(m);const g=n.map(N=>N.index!==void 0?N.index:-1),u=[...new Set(g)];if(u.length>1||u.length===1&&u[0]>0){const N=n.find($=>$.index===m-1);if(N){s(N);return}}else{const N=m-1;if(N>=0&&N<n.length){s(n[N]);return}}const v=btoa(t.url),S=yield i.documents.getChunkByIndex(v,m-1);S.chunk&&s(S.chunk)}catch(g){const u=m-1;u>=0&&u<n.length&&s(n[u])}});return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"btn-secondary",children:[e.jsx(I,{className:"w-4 h-4"}),"Export Analysis"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(V,{className:"w-4 h-4"}),"Open Source"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600 bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"w-6 h-6 text-primary-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-white",children:t.title||t.url||"Untitled Document"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),t.processedAt?new Date(t.processedAt).toLocaleDateString():"Recently processed"]}),e.jsx("span",{children:t.contentType||"Document"}),e.jsxs("span",{children:[n.length," chunks"]}),t.url&&e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",title:t.url,children:[e.jsx(U,{className:"w-4 h-4"}),K(G(t.url),50)]}),t.usesContextualEmbedding&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-400",children:[e.jsx(E,{className:"w-4 h-4"}),"Contextually Enhanced"]})]}),t.summary&&e.jsx("p",{className:"text-gray-300 leading-relaxed",children:t.summary})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 bg-opacity-50 rounded-lg p-1",children:[e.jsx(q,{id:"overview",label:"Overview",icon:L,active:o==="overview",onClick:()=>h("overview")}),e.jsx(q,{id:"chunks",label:"Chunks",icon:A,active:o==="chunks",onClick:()=>h("chunks"),badge:n.length}),e.jsx(q,{id:"analysis",label:"Analysis",icon:E,active:o==="analysis",onClick:()=>h("analysis")})]}),x?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(M,{className:"w-8 h-8 animate-spin text-primary-400 mr-3"}),e.jsx("span",{className:"text-lg",children:"Loading document analysis..."})]})}):e.jsxs(e.Fragment,{children:[o==="overview"&&e.jsx(J,{document:t,chunks:n}),o==="chunks"&&e.jsx(X,{chunks:n,onChunkSelect:b}),o==="analysis"&&e.jsx(H,{document:t,chunks:n})]}),y&&e.jsx(O,{onClose:()=>s(null),fallbackTitle:"Chunk Inspector Error",children:e.jsx(B,{chunk:y,document:t,chunkIndex:c,totalChunks:(()=>{if(n.length===0)return 0;const m=n.map(j=>j.index!==void 0?j.index:-1),g=[...new Set(m)];return g.length>1||g.length===1&&g[0]>0?Math.max(...m)+1:n.length})(),onClose:()=>s(null),onNavigate:w})})]}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Document Selected"}),e.jsx("p",{className:"text-gray-400",children:"Please select a document to view its details."})]})})},q=({id:t,label:a,icon:i,active:n,onClick:l,badge:x})=>e.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n?"bg-primary-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:a}),x!==void 0&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-bold ${n?"bg-primary-800 text-primary-200":"bg-gray-600 text-gray-200"}`,children:x})]}),J=({document:t,chunks:a})=>{const i={total:a.length,completed:a.filter(l=>(l.status==="completed"||l.status==="complete")&&l.index!==-1).length,processing:a.filter(l=>l.status==="processing"||l.index===-1).length,failed:a.filter(l=>l.status==="error"||l.status==="failed").length},n=i.total>0?Math.round(i.completed/i.total*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(T,{title:"Total Chunks",value:i.total,icon:A,color:"text-blue-400"}),e.jsx(T,{title:"Completed",value:i.completed,icon:_,color:"text-green-400"}),e.jsx(T,{title:"Processing",value:i.processing,icon:M,color:"text-yellow-400",animated:i.processing>0}),e.jsx(T,{title:"Failed",value:i.failed,icon:Q,color:"text-red-400"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-bold",children:"Processing Progress"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[n,"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-primary-400"}),"AI Analysis"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Content Type:"}),e.jsx("span",{children:t.contentType||"article"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Technical Level:"}),e.jsx("span",{children:t.technicalLevel||"intermediate"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Sentiment:"}),e.jsx("span",{className:`${t.sentiment==="positive"?"text-green-400":t.sentiment==="negative"?"text-red-400":"text-gray-300"}`,children:t.sentiment||"neutral"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Contextual Embeddings:"}),e.jsx("span",{className:t.usesContextualEmbedding?"text-green-400":"text-gray-500",children:t.usesContextualEmbedding?"Enabled":"Disabled"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-primary-400"}),"Content Statistics"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Characters:"}),e.jsx("span",{children:a.reduce((l,x)=>{var r;return l+(((r=x.text)==null?void 0:r.length)||0)},0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Avg Chunk Size:"}),e.jsxs("span",{children:[a.length>0?Math.round(a.reduce((l,x)=>{var r;return l+(((r=x.text)==null?void 0:r.length)||0)},0)/a.length):0," characters"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Processing Time:"}),e.jsxs("span",{children:["~",(()=>{const l=Math.round(a.length*2.3),x=Math.floor(l/60),r=l%60;return x>0?`${x} min, ${r} sec`:`${r} sec`})()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Storage Size:"}),e.jsxs("span",{children:["~",Math.round(a.length*1.5),"KB"]})]})]})]})]}),e.jsx(Y,{chunks:a})]})},X=({chunks:t,onChunkSelect:a})=>{var x;const{settings:i}=D();(x=i==null?void 0:i.ui)!=null&&x.chunksPerRow;const n={queued:{color:"bg-gray-500",text:"text-gray-200"},processing:{color:"bg-yellow-500 animate-pulse",text:"text-yellow-100"},completed:{color:"bg-green-500",text:"text-green-100"},error:{color:"bg-red-500",text:"text-red-100"}},l=()=>"grid gap-1.5 max-h-[28rem] overflow-y-auto custom-scrollbar p-3 border border-gray-700 rounded-lg bg-gray-800 bg-opacity-30 grid-cols-6 sm:grid-cols-8 md:grid-cols-12 lg:grid-cols-16 xl:grid-cols-20 2xl:grid-cols-24";return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-bold text-xl",children:"Document Chunks"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Click any chunk to inspect its details (responsive grid layout)"})]}),e.jsx("div",{className:l(),children:t.map((r,y)=>{let s="completed";r.status==="processing"?s="processing":r.status==="error"||r.status==="failed"?s="error":r.status==="queued"?s="queued":(r.status==="completed"||r.status==="complete")&&(s="completed");const c=n[s]||n.completed;return e.jsxs("button",{onClick:()=>a(r,y),className:`
                chunk-glow w-full aspect-square rounded-md flex items-center justify-center text-xs font-mono font-bold
                transition-all duration-300 cursor-pointer relative overflow-hidden
                ${c.color} ${c.text}
                ${s==="processing"?"chunk-pulse":""}
                ${s==="completed"?"chunk-completed":""}
                ${s==="error"?"chunk-error":""}
                ${s==="queued"?"chunk-queued":""}
              `,title:`Chunk ${y+1} - Status: ${r.status||"completed"}`,children:[e.jsx("span",{className:"relative z-10",children:y+1}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"})]},r.chunk_id||y)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded animate-pulse"}),e.jsx("span",{className:"text-gray-400",children:"Processing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Queued"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Failed"})]})]})})]})},T=({title:t,value:a,icon:i,color:n,animated:l=!1})=>e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(i,{className:`w-6 h-6 ${n} ${l?"animate-spin":""}`})}),e.jsx("div",{className:`text-2xl font-bold ${n}`,children:a}),e.jsx("div",{className:"text-sm text-gray-400",children:t})]}),Y=({chunks:t})=>{const[a,i]=C.useState(!1),[n,l]=C.useState(!1),[x,r]=C.useState(!1),[y,s]=C.useState(!1),c=t.filter(j=>(j.status==="completed"||j.status==="complete")&&j.index!==-1),p=[];c.forEach(j=>{j.mainTopics&&Array.isArray(j.mainTopics)?p.push(...j.mainTopics):j.main_topics&&Array.isArray(j.main_topics)&&p.push(...j.main_topics)});const o={people:[],locations:[],organizations:[]};c.forEach(j=>{const v=j.keyEntities||j.key_entities;v&&typeof v=="object"&&(v.people&&Array.isArray(v.people)&&o.people.push(...v.people),v.locations&&Array.isArray(v.locations)&&o.locations.push(...v.locations),v.organizations&&Array.isArray(v.organizations)&&o.organizations.push(...v.organizations))});const h=[...new Set(p)].filter(Boolean),f=[...new Set(o.people)].filter(Boolean),b=[...new Set(o.locations)].filter(Boolean),w=[...new Set(o.organizations)].filter(Boolean),m=h.length>0,g=f.length>0||b.length>0||w.length>0,u=t.some(j=>j.status==="processing"||j.index===-1);return!m&&!g&&!u?null:e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Topics & Entities"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-300",children:"Main Topics"}),m?e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(a?h:h.slice(0,12)).map((j,v)=>e.jsx("span",{className:"px-3 py-1 bg-blue-600 bg-opacity-20 text-blue-300 text-sm rounded-full",children:j},v)),h.length>12&&e.jsx("button",{onClick:()=>i(!a),className:"px-3 py-1 bg-gray-600 bg-opacity-20 text-gray-400 text-sm rounded-full hover:bg-gray-600 hover:bg-opacity-40 hover:text-gray-300 transition-colors cursor-pointer",title:a?"Show less":`Show all ${h.length} topics`,children:a?"Show less":`+${h.length-12} more`})]}):e.jsx("div",{className:"text-sm text-gray-400",children:u?"Topics being analyzed...":"No topics detected"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-300",children:"Key Entities"}),g?e.jsxs("div",{className:"space-y-2 text-sm",children:[f.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"People:"}),e.jsx("span",{className:"ml-2",children:(n?f:f.slice(0,8)).join(", ")}),f.length>8&&e.jsx("button",{onClick:()=>l(!n),className:"text-gray-400 hover:text-gray-300 transition-colors cursor-pointer underline ml-1",title:n?"Show less":`Show all ${f.length} people`,children:n?" Show less":` +${f.length-8} more`})]}),w.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Organizations:"}),e.jsx("span",{className:"ml-2",children:(x?w:w.slice(0,8)).join(", ")}),w.length>8&&e.jsx("button",{onClick:()=>r(!x),className:"text-gray-400 hover:text-gray-300 transition-colors cursor-pointer underline ml-1",title:x?"Show less":`Show all ${w.length} organizations`,children:x?" Show less":` +${w.length-8} more`})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Locations:"}),e.jsx("span",{className:"ml-2",children:(y?b:b.slice(0,8)).join(", ")}),b.length>8&&e.jsx("button",{onClick:()=>s(!y),className:"text-gray-400 hover:text-gray-300 transition-colors cursor-pointer underline ml-1",title:y?"Show less":`Show all ${b.length} locations`,children:y?" Show less":` +${b.length-8} more`})]})]}):e.jsx("div",{className:"text-sm text-gray-400",children:u?"Entities being extracted...":"No entities detected"})]})]})]})},le=W;export{B as ChunkInspector,le as DocumentViewer,oe as VectorHeatmap};
