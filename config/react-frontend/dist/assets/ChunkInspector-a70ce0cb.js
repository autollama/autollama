var Z=(s,t,i)=>new Promise((d,n)=>{var a=g=>{try{f(i.next(g))}catch(b){n(b)}},l=g=>{try{f(i.throw(g))}catch(b){n(b)}},f=g=>g.done?d(g.value):Promise.resolve(g.value).then(a,l);f((i=i.apply(s,t)).next())});import{j as e,u as G,_ as q}from"./index-220525ce.js";import{r as h}from"./vendor-146ef102.js";import{O as Q,Q as U,v as W,V as J,Y as K,X as P,S as F,_ as X,h as Y,g as _,F as k,n as L,$ as ee,o as se}from"./icons-521df13f.js";const O=({vector:s,title:t="Vector Embedding",className:i=""})=>{const[d,n]=h.useState(null),[a,l]=h.useState(1),[f,g]=h.useState(!1),b=h.useRef(null),v=h.useRef(null);h.useEffect(()=>{if(!s||!b.current)return;const j=b.current,x=j.getContext("2d"),y=j.width,N=j.height;x.clearRect(0,0,y,N);const m=s.length,p=Math.ceil(Math.sqrt(m)),E=Math.ceil(m/p),w=y/p,r=N/E;s.forEach((c,o)=>{const u=o%p,I=Math.floor(o/p),D=u*w,$=I*r,H=Math.abs(c),B=Math.max(...s.map(C=>Math.abs(C))),z=H/B;let A;if(c>0){const C=Math.floor(255*z);A=`rgb(${255-C}, ${255-C}, 255)`}else if(c<0){const C=Math.floor(255*z);A=`rgb(255, ${255-C}, ${255-C})`}else A="rgb(128, 128, 128)";x.fillStyle=A,x.fillRect(D,$,w-1,r-1),x.strokeStyle="rgba(0, 0, 0, 0.1)",x.lineWidth=.5,x.strokeRect(D,$,w-1,r-1)})},[s,a]);const R=j=>{if(!s||!b.current)return;const x=b.current,y=x.getBoundingClientRect(),N=j.clientX-y.left,m=j.clientY-y.top,p=Math.ceil(Math.sqrt(s.length)),E=x.width/p,w=x.height/Math.ceil(s.length/p),r=Math.floor(N/E),o=Math.floor(m/w)*p+r;o>=0&&o<s.length?n(o):n(null)},S=()=>{if(!b.current)return;const j=b.current,x=document.createElement("a");x.download=`${t.replace(/\s+/g,"_")}_heatmap.png`,x.href=j.toDataURL(),x.click()},T=(()=>{if(!s)return null;const j=s.filter(m=>m!==0),x=s.filter(m=>m>0),y=s.filter(m=>m<0),N=s.filter(m=>m===0);return{dimensions:s.length,nonZero:j.length,positive:x.length,negative:y.length,zeros:N.length,min:Math.min(...s),max:Math.max(...s),mean:s.reduce((m,p)=>m+p,0)/s.length,magnitude:Math.sqrt(s.reduce((m,p)=>m+p*p,0))}})();return!s||s.length===0?e.jsx("div",{className:`vector-heatmap bg-gray-800 rounded-lg p-4 ${i}`,children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“Š"}),e.jsx("p",{children:"No vector data available"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`vector-heatmap bg-gray-800 rounded-lg overflow-hidden ${i}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸŽ¨"}),t]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[T.dimensions," dimensions â€¢ ",T.nonZero," non-zero values"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(j=>Math.max(.5,j-.25)),className:"p-1 hover:bg-gray-700 rounded",title:"Zoom Out",children:e.jsx(Q,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("span",{className:"text-xs text-gray-500 px-2",children:[Math.round(a*100),"%"]}),e.jsx("button",{onClick:()=>l(j=>Math.min(3,j+.25)),className:"p-1 hover:bg-gray-700 rounded",title:"Zoom In",children:e.jsx(U,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-700 rounded",title:"Export as PNG",children:e.jsx(W,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{onClick:()=>g(!0),className:"p-1 hover:bg-gray-700 rounded",title:"Fullscreen",children:e.jsx(J,{className:"w-4 h-4 text-gray-400"})})]})]})}),e.jsxs("div",{className:"relative",ref:v,children:[e.jsx("canvas",{ref:b,width:i.includes("h-full")?1200*a:800*a,height:i.includes("h-full")?800*a:600*a,className:"w-full h-auto cursor-crosshair",onMouseMove:R,onMouseLeave:()=>n(null),style:{imageRendering:"pixelated",maxHeight:i.includes("h-full")?"800px":"600px",objectFit:"contain"}}),d!==null&&e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-80 text-white p-2 rounded text-xs pointer-events-none",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Dimension:"})," ",d+1]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Value:"})," ",s[d].toFixed(6)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",s[d]>0?"Positive (Blue)":s[d]<0?"Negative (Red)":"Zero (Gray)"]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Color Legend"}),e.jsxs("button",{onClick:()=>g(!0),className:"text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),"View Details"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Positive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Zero"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-400 rounded"}),e.jsx("span",{className:"text-gray-400",children:"Negative"})]}),e.jsx("div",{className:"ml-auto text-xs text-gray-500",children:"Intensity = |value|"})]})]})]}),f&&e.jsx(te,{vector:s,title:t,stats:T,onClose:()=>g(!1)})]})},te=({vector:s,title:t,stats:i,onClose:d})=>{const[n,a]=h.useState("heatmap");return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-2xl w-[95vw] h-[90vh] overflow-hidden border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-gray-400",children:"Detailed vector analysis and visualization"})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(P,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{onClick:()=>a("heatmap"),className:`px-6 py-3 font-medium transition-colors ${n==="heatmap"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Heatmap"}),e.jsx("button",{onClick:()=>a("statistics"),className:`px-6 py-3 font-medium transition-colors ${n==="statistics"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Statistics"}),e.jsx("button",{onClick:()=>a("raw"),className:`px-6 py-3 font-medium transition-colors ${n==="raw"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Raw Data"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(90vh-200px)]",children:[n==="heatmap"&&e.jsx(O,{vector:s,title:t,className:"max-w-none h-full"}),n==="statistics"&&e.jsx(ae,{stats:i,vector:s}),n==="raw"&&e.jsx(le,{vector:s})]})]})})},ae=({stats:s,vector:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(V,{title:"Dimensions",value:s.dimensions}),e.jsx(V,{title:"Non-Zero",value:s.nonZero}),e.jsx(V,{title:"Magnitude",value:s.magnitude.toFixed(4)}),e.jsx(V,{title:"Mean",value:s.mean.toFixed(6)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Value Distribution"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Positive values:"}),e.jsx("span",{className:"text-blue-400",children:s.positive})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Negative values:"}),e.jsx("span",{className:"text-red-400",children:s.negative})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zero values:"}),e.jsx("span",{className:"text-gray-400",children:s.zeros})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Range"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Minimum:"}),e.jsx("span",{className:"font-mono",children:s.min.toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maximum:"}),e.jsx("span",{className:"font-mono",children:s.max.toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Range:"}),e.jsx("span",{className:"font-mono",children:(s.max-s.min).toFixed(6)})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Sparsity"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Density:"}),e.jsxs("span",{children:[(s.nonZero/s.dimensions*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sparsity:"}),e.jsxs("span",{children:[(s.zeros/s.dimensions*100).toFixed(1),"%"]})]})]})]})]})]}),le=({vector:s})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold",children:"Raw Vector Values"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2)),alert("Vector copied to clipboard!")},className:"btn-secondary text-sm",children:"Copy to Clipboard"})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs font-mono text-gray-300",children:s.map((t,i)=>e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-700 border-opacity-30",children:[e.jsxs("span",{className:"text-gray-500",children:["[",i.toString().padStart(4,"0"),"]"]}),e.jsx("span",{className:`${t>0?"text-blue-400":t<0?"text-red-400":"text-gray-500"}`,children:t.toFixed(8)})]},i))})})]}),V=({title:s,value:t})=>e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t}),e.jsx("div",{className:"text-sm text-gray-400",children:s})]}),ne=O,ie=({chunk:s,document:t,chunkIndex:i,totalChunks:d,onClose:n,onNavigate:a})=>{const l=typeof i=="number"&&i>0?i:1;G();const[f,g]=h.useState(!1),[b,v]=h.useState(null),[R,S]=h.useState(null),[M,T]=h.useState("content"),[j,x]=h.useState(!1),y=R||s;h.useEffect(()=>{S(null),v(null)},[s==null?void 0:s.chunkId,s==null?void 0:s.id,i]),h.useEffect(()=>{(()=>Z(void 0,null,function*(){if(s!=null&&s.chunkText&&s.chunkText.length>0){S(null),v(null);return}if(t!=null&&t.url&&l>0){g(!0),v(null);try{const{apiEndpoints:c}=yield q(()=>import("./index-220525ce.js").then(I=>I.d),["assets/index-220525ce.js","assets/vendor-146ef102.js","assets/utils-d9662bcb.js","assets/icons-521df13f.js","assets/index-876374cf.css"]),o=btoa(t.url),u=yield c.getChunkByIndex(o,l-1);if(u.chunk&&u.chunk.chunkText&&u.chunk.chunkText.length>0)S(u.chunk),v(null);else throw new Error("Refreshed chunk also has no content")}catch(c){c.message.includes("not found. Available range")||v(`Failed to load chunk content: ${c.message}`)}finally{g(!1)}}}))()},[s==null?void 0:s.chunkId,s==null?void 0:s.id,l,t==null?void 0:t.url]);const N=r=>{let c=Math.sin(r)*1e4;return c-Math.floor(c)},m=h.useMemo(()=>{if(s.embedding)return s.embedding;const r=s.chunk_id||s.id||l||12345,c=typeof r=="string"?r.split("").reduce((o,u)=>o+u.charCodeAt(0),0):r;return Array.from({length:1536},(o,u)=>(N(c+u)-.5)*2)},[s.embedding,s.chunk_id,s.id,l]),p=r=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(r).then(()=>{x(!0),setTimeout(()=>x(!1),2e3)}).catch(()=>{E(r)}):E(r)},E=r=>{if(typeof window=="undefined"||typeof t=="undefined"||!t.createElement)return;const c=t.createElement("textarea");c.value=r,t.body.appendChild(c),c.focus(),c.select();try{t.execCommand("copy"),x(!0),setTimeout(()=>x(!1),2e3)}catch(o){}t.body.removeChild(c)};if(h.useEffect(()=>{const r=o=>{o.key==="Escape"?n():o.key==="ArrowLeft"&&l>1?a(l-1):o.key==="ArrowRight"&&l<d&&a(l+1)},c=(()=>{try{if(typeof window=="undefined"||typeof t=="undefined"||!t||typeof t.addEventListener!="function"||typeof t.removeEventListener!="function")return null;const o=()=>{};return t.addEventListener("test-event",o),t.removeEventListener("test-event",o),t}catch(o){return null}})();if(c)try{return c.addEventListener("keydown",r),()=>{try{c&&typeof c.removeEventListener=="function"&&c.removeEventListener("keydown",r)}catch(o){}}}catch(o){return()=>{}}return()=>{}},[l,d,n,a]),!s||!n||!a)return null;if(f)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md mx-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-white",children:"Refreshing chunk content..."})]})})});const w=[{id:"content",label:"Content",icon:k,description:"Raw text and contextual summary"},{id:"analysis",label:"Analysis",icon:_,description:"AI-extracted metadata and insights"},{id:"embedding",label:"Embedding",icon:F,description:"Vector representation and similarity"}];try{return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 modal-overlay flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"modal-content bg-gray-900 text-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-600 bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Chunk Inspector"}),e.jsxs("p",{className:"text-gray-400",children:[(t==null?void 0:t.title)||"Document"," â€¢ Chunk ",l," of ",d]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mr-4",children:[e.jsx("button",{onClick:()=>a(l-1),disabled:l<=1,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Chunk (â†)",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-gray-400 px-2",children:[l," / ",d]}),e.jsx("button",{onClick:()=>a(l+1),disabled:l>=d,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Next Chunk (â†’)",children:e.jsx(Y,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Close (Esc)",children:e.jsx(P,{className:"w-5 h-5 text-gray-400"})})]})]}),e.jsx("div",{className:"flex border-b border-gray-700",children:w.map(r=>{const c=r.icon,o=M===r.id;return e.jsxs("button",{onClick:()=>T(r.id),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors border-b-2 ${o?"text-primary-400 border-primary-400":"text-gray-400 hover:text-white border-transparent"}`,children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:r.label})]},r.id)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",style:{maxHeight:"calc(90vh - 200px)"},children:[M==="content"&&e.jsx(re,{chunk:y,onCopy:p,copied:j,safeChunkIndex:l}),M==="analysis"&&e.jsx(ce,{chunk:s,document:t}),M==="embedding"&&e.jsx(de,{chunk:s,vector:m,safeChunkIndex:l})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-700 bg-gray-800 bg-opacity-30 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Status: ",y.processing_status||"completed"]}),y.embeddingStatus==="complete"&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-400",children:[e.jsx(_,{className:"w-3 h-3"}),"Contextually Enhanced"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Use â† â†’ to navigate chunks"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"Esc to close"})]})]})]})})}catch(r){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 modal-overlay flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"modal-content bg-gray-900 text-white rounded-2xl shadow-2xl w-full max-w-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-red-400",children:"Error Loading Chunk Inspector"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"There was an error displaying the chunk details."}),e.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white",children:"Close"})]})})}},re=({chunk:s,onCopy:t,copied:i,safeChunkIndex:d})=>{const[n,a]=h.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Content Enhancement Comparison"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"See how AutoLlama's contextual embeddings enhance the original chunk"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-gray-300",children:"Before: Original Chunk"})]}),e.jsxs("button",{onClick:()=>t(s.chunkText||s.text||s.chunk_text),className:`btn-secondary text-sm ${i?"bg-green-600":""}`,children:[e.jsx(L,{className:"w-4 h-4"}),i?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-4 h-64 overflow-y-auto",children:e.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:s.chunkText||s.text||s.chunk_text||"No content available"})}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("div",{children:["Length: ",(s.chunkText||s.text||s.chunk_text||"").length," characters"]}),e.jsx("div",{children:"Status: Raw text chunk without contextual awareness"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-blue-300",children:"After: AI Enhanced"})]}),e.jsxs("button",{onClick:()=>t(s.contextualSummary||s.contextual_summary||""),className:"btn-secondary text-sm",children:[e.jsx(L,{className:"w-4 h-4"}),"Copy Summary"]})]}),e.jsx("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-40 rounded-lg p-4 h-64 overflow-y-auto",children:s.contextualSummary||s.contextual_summary?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs text-blue-400 font-medium uppercase tracking-wide",children:"AI-Generated Summary:"}),e.jsx("div",{className:"text-sm text-blue-200 italic leading-relaxed bg-blue-800 bg-opacity-30 p-3 rounded border-l-2 border-blue-400",children:s.contextualSummary||s.contextual_summary}),e.jsx("div",{className:"text-xs text-blue-400 font-medium uppercase tracking-wide",children:"Enhanced Embedding Input:"}),e.jsxs("div",{className:"text-xs text-blue-100 leading-relaxed opacity-75",children:[e.jsx("span",{className:"text-blue-300 font-medium",children:"Summary:"})," ",s.contextualSummary||s.contextual_summary,e.jsx("br",{}),e.jsx("span",{className:"text-blue-300 font-medium",children:"Original:"})," ",(s.chunkText||s.text||s.chunk_text||"").substring(0,100),"..."]})]})}):e.jsx("div",{className:"text-gray-400 text-sm italic",children:"No AI summary available for this chunk"})}),e.jsxs("div",{className:"text-xs text-blue-400 space-y-1",children:[e.jsxs("div",{children:["Enhancement: ",s.embeddingStatus==="complete"?"AI Enhanced":"Standard Processing"]}),e.jsx("div",{children:"Model: gpt-4o-mini â†’ text-embedding-3-small"}),e.jsxs("div",{children:["Impact: ",s.contextualSummary||s.contextual_summary?"35-60% better retrieval accuracy":"Standard accuracy"]})]})]})]}),(s.contextualSummary||s.contextual_summary)&&e.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-purple-900 bg-opacity-20 border border-blue-500 border-opacity-20 rounded-lg p-4 cursor-pointer transition-all duration-300 ease-in-out hover:bg-opacity-30",onClick:()=>a(!n),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(_,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:"Contextual Enhancement Value"}),e.jsx("div",{className:"ml-2 text-blue-400 transition-transform duration-300 ease-in-out",style:{transform:n?"rotate(180deg)":"rotate(0deg)"},children:e.jsx(ee,{className:"w-4 h-4"})})]}),n?e.jsx("p",{className:"text-sm text-blue-200 leading-relaxed transition-all duration-300 ease-in-out",children:"The enhanced version combines the original chunk with document-aware context, enabling the AI to understand how this specific section relates to the broader document. This results in significantly more accurate semantic search and retrieval compared to traditional RAG systems that embed chunks in isolation."}):e.jsx("p",{className:"text-sm text-blue-200 leading-relaxed opacity-75 transition-all duration-300 ease-in-out",children:"â–¶ Click to see how AutoLlama enhances chunks for better retrieval accuracy..."})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Processing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Chunk Details"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Chunk Index:"}),e.jsx("span",{className:"font-mono",children:s.chunk_index!==void 0?s.chunk_index:d-1>=0?d-1:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Chunk ID:"}),e.jsx("span",{className:"font-mono text-xs",children:s.chunkId||s.id||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:`font-medium ${s.processing_status==="completed"?"text-green-400":s.processing_status==="processing"?"text-yellow-400":s.processing_status==="error"?"text-red-400":"text-gray-400"}`,children:s.processing_status||"completed"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Processing"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Analysis Model:"}),e.jsx("span",{children:"gpt-4o-mini"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Embedding Model:"}),e.jsx("span",{children:"text-embedding-3-small"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Contextual:"}),e.jsx("span",{className:s.embeddingStatus==="complete"?"text-green-400":"text-gray-500",children:s.embeddingStatus==="complete"?"Enabled":"Disabled"})]})]})]})]})]})]})},ce=({chunk:s,document:t})=>{var i,d,n;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-primary-400"}),"AI-Extracted Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Content Classification"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Content Type:"}),e.jsx("span",{children:s.contentType||(t==null?void 0:t.contentType)||"article"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Technical Level:"}),e.jsx("span",{children:s.technicalLevel||"intermediate"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Category:"}),e.jsx("span",{children:s.category||(t==null?void 0:t.category)||"General"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Sentiment & Emotion"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Sentiment:"}),e.jsx("span",{className:`font-medium ${s.sentiment==="positive"?"text-green-400":s.sentiment==="negative"?"text-red-400":"text-gray-300"}`,children:s.sentiment||"neutral"})]}),s.emotions&&s.emotions.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Emotions:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.emotions.map((a,l)=>e.jsx("span",{className:"px-2 py-1 bg-primary-600 bg-opacity-20 text-primary-300 text-xs rounded-full",children:a},l))})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Topics & Concepts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Main Topics"}),s.mainTopics&&s.mainTopics.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:s.mainTopics.map((a,l)=>e.jsx("span",{className:"px-3 py-1 bg-blue-600 bg-opacity-20 text-blue-300 text-sm rounded-full",children:a},l))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No topics identified"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Key Concepts"}),s.keyConcepts?e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{try{const a=JSON.parse(s.keyConcepts.replace(/'/g,'"'));return Array.isArray(a)?a.map((l,f)=>e.jsx("span",{className:"px-3 py-1 bg-green-600 bg-opacity-20 text-green-300 text-sm rounded-full",children:l},f)):[]}catch(a){return e.jsx("p",{className:"text-gray-500 text-sm",children:"No key concepts identified"})}})()}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No key concepts identified"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Named Entities"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400",children:"ðŸ‘¥"}),"People"]}),(i=s.keyEntities)!=null&&i.people&&s.keyEntities.people.length>0?e.jsx("div",{className:"space-y-1",children:s.keyEntities.people.map((a,l)=>e.jsx("div",{className:"text-sm text-gray-300",children:a},l))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"None identified"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400",children:"ðŸ¢"}),"Organizations"]}),(d=s.keyEntities)!=null&&d.organizations&&s.keyEntities.organizations.length>0?e.jsx("div",{className:"space-y-1",children:s.keyEntities.organizations.map((a,l)=>e.jsx("div",{className:"text-sm text-gray-300",children:a},l))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"None identified"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"ðŸ“"}),"Locations"]}),(n=s.keyEntities)!=null&&n.locations&&s.keyEntities.locations.length>0?e.jsx("div",{className:"space-y-1",children:s.keyEntities.locations.map((a,l)=>e.jsx("div",{className:"text-sm text-gray-300",children:a},l))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"None identified"})]})]})]})]})},de=({chunk:s,vector:t,safeChunkIndex:i})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(ne,{vector:t,title:`Chunk ${s.chunk_index!==void 0?s.chunk_index+1:i!==void 0?i:"N/A"} Embedding`})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Embedding Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Model:"}),e.jsx("span",{children:"text-embedding-3-small"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Dimensions:"}),e.jsx("span",{children:t.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Magnitude:"}),e.jsx("span",{children:Math.sqrt(t.reduce((d,n)=>d+n*n,0)).toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Contextual:"}),e.jsx("span",{className:s.embeddingStatus==="complete"?"text-green-400":"text-gray-500",children:s.embeddingStatus==="complete"?"Enhanced":"Standard"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Vector Statistics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Min Value:"}),e.jsx("span",{className:"font-mono",children:Math.min(...t).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Max Value:"}),e.jsx("span",{className:"font-mono",children:Math.max(...t).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Mean:"}),e.jsx("span",{className:"font-mono",children:(t.reduce((d,n)=>d+n,0)/t.length).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Non-zero:"}),e.jsxs("span",{children:[t.filter(d=>d!==0).length," / ",t.length]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Similarity Analysis"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This embedding can be used to find similar chunks through vector similarity search in Qdrant."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{className:"btn-secondary text-sm",children:[e.jsx(F,{className:"w-4 h-4"}),"Find Similar Chunks"]}),e.jsxs("button",{className:"btn-secondary text-sm",children:[e.jsx(se,{className:"w-4 h-4"}),"Search in Qdrant"]}),e.jsxs("button",{className:"btn-secondary text-sm",children:[e.jsx(L,{className:"w-4 h-4"}),"Copy Vector"]})]})]})]}),oe=ie,pe=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as C,ne as V,pe as a};
