Permissions 0644 for n8n settings file /home/node/.n8n/config are too wide. This is ignored for now, but in the future n8n will attempt to change the permissions automatically. To automatically enforce correct permissions now set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true (recommended), or turn this check off set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false.
User settings loaded from: /home/node/.n8n/config

There is a deprecation related to your environment variables. Please take the recommended actions to update your configuration:
 - N8N_RUNNERS_ENABLED -> Running n8n without task runners is deprecated. Task runners will be turned on by default in a future version. Please set `N8N_RUNNERS_ENABLED=true` to enable task runners now and avoid potential issues in the future. Learn more: https://docs.n8n.io/hosting/configuration/task-runners/

[{"createdAt":"2025-07-12T13:00:01.932Z","updatedAt":"2025-07-13T23:09:25.000Z","id":"E7Ln37qRBNr0jaii","name":"autollama.io","active":true,"isArchived":false,"nodes":[{"parameters":{"url":"={{ $json.body.url }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-320,0],"id":"5996ab02-796e-4d9c-845c-a439b18fff27","name":"HTTP Request"},{"parameters":{"html":"={{ $json.data }}","options":{}},"type":"n8n-nodes-base.markdown","typeVersion":1,"position":[-40,0],"id":"df074304-51a8-47ad-8f64-1d672510d5e2","name":"Markdown","alwaysOutputData":false},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"You are a RAG content analyzer. Process the input text chunk and return structured metadata for vector storage.\n\nReturn a JSON object with:\n{\n  \"title\": \"Descriptive title for this content chunk (max 100 chars)\",\n  \"summary\": \"2-3 sentence summary of this chunk's main points\",\n  \"key_concepts\": [\"array\", \"of\", \"main\", \"concepts\", \"from\", \"chunk\"],\n  \"category\": \"primary category: Technology, Business, Science, Health, Politics, General\",\n  \"tags\": [\"relevant\", \"searchable\", \"tags\"],\n  \"content_type\": \"article|tutorial|documentation|news|other\",\n  \"technical_level\": \"beginner|intermediate|advanced\",\n  \"date_processed\": \"{{ new Date().toISOString() }}\",\n  \"source_url\": \"{{ $('Text Chunker').item.json.original_url }}\",\n  \"chunk_text\": \"cleaned text optimized for embedding\"\n}\n\nFocus on the specific content in this chunk, not the entire document.","role":"system"},{"content":"Process this text chunk: {{ $('Text Chunker').item.json.chunk_text }}","role":"=user"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[400,0],"id":"3cc9b5e7-75e3-45c2-b727-79ffb323f53a","name":"Message a model","credentials":{"openAiApi":{"id":"ch5f5peXcVJq7Hem","name":"OpenAi account"}}},{"parameters":{"httpMethod":"POST","path":"8c4cba6c-89aa-4f09-8b51-62d4a422ebba","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-640,260],"id":"efdebc26-b4ea-493a-ba32-0afcb01b9421","name":"Webhook","webhookId":"8c4cba6c-89aa-4f09-8b51-62d4a422ebba"},{"parameters":{"assignments":{"assignments":[{"id":"0ffd53d8-de29-4c3a-8d14-d26a289f74e9","name":"url","value":"={{ $json.original_url }}","type":"string"},{"id":"4afd2da1-9933-48d1-bf67-6697ea05c6e4","name":"title","value":"={{ $json.title }}","type":"string"},{"id":"4406cf70-707b-4a6d-8ef6-2eb34d617f13","name":"content","value":"={{ $json.title }}","type":"string"},{"id":"91d3ed49-f0ce-42b9-937f-15a16778d675","name":"summary","value":"={{ $json.summary }}","type":"string"},{"id":"92c5a587-6813-44ef-bcf1-1756a9a2368d","name":"links","value":"={{ $('Message a model').item.json.message.content.links }}","type":"string"},{"id":"df510c42-b450-460a-8a0e-5d5f189d7eeb","name":"Processed Date","value":"={{ new Date().toISOString() }}","type":"string"},{"id":"049f0fb3-25a5-4ccf-82e3-0ff7b8a3dd29","name":"status","value":"Complete","type":"string"},{"id":"27c8d784-1519-4d8f-9486-b8ad6440cf9e","name":"source","value":"autollama.io","type":"string"},{"id":"e1490e60-37ef-40a9-abd9-03349b85c4de","name":"category","value":"={{ $('Message a model').item.json.message.content.category }}","type":"string"},{"id":"09710893-e465-4b2f-ab63-d5d8cacbded3","name":"sentiment","value":"={{ $('Message a model').item.json.message.content.sentiment }}","type":"string"},{"id":"620b207b-0a1a-4768-89e6-b097be104cea","name":"emotions","value":"={{ JSON.stringify($('Message a model').item.json.message.content.emotions) }}","type":"string"},{"id":"371f4d13-b3d4-49a4-9baf-58b92e8c3ec9","name":"entities","value":"={{ JSON.stringify($('Message a model').item.json.message.content.entities) }}","type":"string"},{"id":"cd66002b-438a-4f7f-b2ae-d964b35ef226","name":"topics","value":"={{ JSON.stringify($('Message a model').item.json.message.content.topics) }}","type":"string"},{"id":"d21b7761-a4a7-49f1-8ac4-384a69eff6f3","name":"key_concepts","value":"={{ $('Message a model').item.json.message.content.key_concepts.join(', ') }}","type":"string"},{"id":"9065e7ab-5456-4e70-869f-35c0de6fa0e0","name":"category","value":"={{ $('Message a model').item.json.message.content.category }}","type":"string"},{"id":"82de3fac-311e-4264-a8ee-d914d4fcd3df","name":"tags","value":"={{ $('Message a model').item.json.message.content.tags.join(', ') }}","type":"string"},{"id":"8e0a836b-567f-4d64-b22c-adc1a7a18f7f","name":"content_type","value":"={{ $('Message a model').item.json.message.content.content_type }}","type":"string"},{"id":"12bf7680-528b-4c1b-8190-b31e19341b72","name":"technical_level","value":"={{ $('Message a model').item.json.message.content.technical_level }}","type":"string"},{"id":"02085168-0d38-4309-98ff-24a781561c26","name":"chunk_id","value":"={{ $('Text Chunker').item.json.chunk_id }}","type":"string"},{"id":"7016c431-b361-444b-9eae-91f8d07ddb8b","name":"vector_id","value":"={{ $('Text Chunker').item.json.vector_id }}","type":"string"},{"id":"bf4d9c13-adf8-4c99-b255-2d016e61c5c8","name":"chunk_text","value":"={{ $('Text Chunker').item.json.chunk_text }}","type":"string"},{"id":"173d1480-436c-42d7-b6f9-5293f04ae964","name":"=chunk_index","value":"={{ $('Text Chunker').item.json.chunk_index }}","type":"string"},{"id":"267e19a9-1127-4237-a163-55e3fe717af8","name":"=embedding_status","value":"={{ $('Store in Qdrant').item.json.status === 'ok' ? 'complete' : 'error' }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[520,320],"id":"65a1c11a-761f-407f-9cbe-c9c59023ff43","name":"Prepare Airtable Data"},{"parameters":{"operation":"create","base":{"__rl":true,"value":"appi5lnDWjvstGsqr","mode":"id"},"table":{"__rl":true,"value":"tblrO3XjykQIqURb4","mode":"list","cachedResultName":"Processed URLs","cachedResultUrl":"https://airtable.com/appi5lnDWjvstGsqr/tblrO3XjykQIqURb4"},"columns":{"mappingMode":"defineBelow","value":{"Title":"={{ $json.title }}","Content":"={{ $json.content }}","Summary":"={{ $json.summary }}","Links":"={{ JSON.stringify($json.links) }}","Source":"={{ $json.source }}","URL":"={{ $json.url }}","Select":"=Complete","Category":"={{ $json.category }}","Sentiment":"={{ $json.sentiment }}","Emotions":"={{ $json.emotions }}","Key Entities":"={{ $json.entities }}","Main Topics":"={{ $json.topics }}","Chunk Index":"={{ $('Text Chunker').item.json.chunk_index }}","Key Concepts":"key_concepts","Tags":"={{ $('Message a model').item.json.message.content.key_concepts.join(', ') }}","Content Type":"={{ $('Message a model').item.json.message.content.content_type }}","Technical Level":"={{ $('Message a model').item.json.message.content.technical_level }}","Chunk ID":"={{ $('Text Chunker').item.json.chunk_id }}","Chunk Text":"={{ $('Text Chunker').item.json.chunk_text }}","Vector ID":"={{ $('Text Chunker').item.json.vector_id }}","Date Processed":"={{ new Date().toISOString() }}","Embedding Status":"=pending"},"matchingColumns":[],"schema":[{"id":"URL","displayName":"URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Content","displayName":"Content","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Summary","displayName":"Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Links","displayName":"Links","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Select","displayName":"Select","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Processing","value":"Processing"},{"name":"Complete","value":"Complete"},{"name":"Error","value":"Error"}],"readOnly":false,"removed":false},{"id":"Source","displayName":"Source","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Date Processed","displayName":"Date Processed","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":false},{"id":"Category","displayName":"Category","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Technology","value":"Technology"},{"name":"US Politics","value":"US Politics"},{"name":"World News","value":"World News"},{"name":"Business","value":"Business"},{"name":"Science","value":"Science"},{"name":"History","value":"History"},{"name":"General Interest","value":"General Interest"}],"readOnly":false,"removed":false},{"id":"Sentiment","displayName":"Sentiment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Positive","value":"Positive"},{"name":"Negative","value":"Negative"},{"name":"Neutral","value":"Neutral"}],"readOnly":false,"removed":false},{"id":"Emotions","displayName":"Emotions","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","options":[{"name":"Joy","value":"Joy"},{"name":"Anger","value":"Anger"},{"name":"Fear","value":"Fear"},{"name":"Surprise","value":"Surprise"},{"name":"Sadness","value":"Sadness"},{"name":"Anticipation","value":"Anticipation"},{"name":"Trust","value":"Trust"},{"name":"Disgust","value":"Disgust"}],"readOnly":false,"removed":false},{"id":"Key Entities","displayName":"Key Entities","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Main Topics","displayName":"Main Topics","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Key Concepts","displayName":"Key Concepts","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Tags","displayName":"Tags","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Content Type","displayName":"Content Type","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"article","value":"article"},{"name":"tutorial","value":"tutorial"},{"name":"documentation","value":"documentation"},{"name":"news","value":"news"},{"name":"other","value":"other"}],"readOnly":false,"removed":false},{"id":"Technical Level","displayName":"Technical Level","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"beginner","value":"beginner"},{"name":"intermediate","value":"intermediate"},{"name":"advanced","value":"advanced"}],"readOnly":false,"removed":false},{"id":"Chunk ID","displayName":"Chunk ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Vector ID","displayName":"Vector ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Chunk Text","displayName":"Chunk Text","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Chunk Index","displayName":"Chunk Index","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"number","readOnly":false,"removed":false},{"id":"Embedding Status","displayName":"Embedding Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"pending","value":"pending"},{"name":"complete","value":"complete"},{"name":"error","value":"error"}],"readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{"typecast":true}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[820,200],"id":"626ef558-cb54-44fa-a902-0ed4f1b4a9cc","name":"Create a record","credentials":{"airtableTokenApi":{"id":"TKqS90WbVlT7DuOZ","name":"Airtable Personal Access Token account"}}},{"parameters":{"jsCode":"// Text chunking with overlap for RAG\nconst content = $input.item.json.data;\nconst chunkSize = 1200;\nconst overlap = 200;\nconst chunks = [];\n\nif (!content || content.length === 0) {\n  return [{ json: { error: \"No content to chunk\" } }];\n}\n\n// Clean the content\nconst cleanContent = content.replace(/\\s+/g, ' ').trim();\n\n// Generate a UUID-like function\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nfor (let i = 0; i < cleanContent.length; i += chunkSize - overlap) {\n  const chunk = cleanContent.slice(i, i + chunkSize);\n  \n  // Use UUID for chunk_id\n  const chunkId = generateUUID();\n  const vectorId = `vec_${Math.random().toString(36).substring(2, 15)}`;\n  \n  chunks.push({\n    chunk_text: chunk.trim(),\n    chunk_id: chunkId,  // Now this is a UUID\n    vector_id: vectorId,\n    chunk_index: Math.floor(i / (chunkSize - overlap)),\n    original_url: $('Webhook').item.json.body.url,\n    total_chunks: Math.ceil(cleanContent.length / (chunkSize - overlap))\n  });\n}\n\nreturn chunks.map(chunk => ({ json: chunk }));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[220,0],"id":"106a703a-b316-4e07-bada-88f11cc5a473","name":"Text Chunker"},{"parameters":{"jsCode":"// Get the embedding from OpenAI response\nconst embedding = $input.item.json.data[0].embedding;\n\n// Get data from previous nodes\nconst chunkData = $('Text Chunker').item.json;\nconst analysisData = $('Message a model').item.json.message.content;\n\n// Return in correct n8n format - wrapped in array with json property\nreturn [{\n  json: {\n    // Chunk data\n    chunk_text: chunkData.chunk_text,\n    chunk_id: chunkData.chunk_id,\n    chunk_index: chunkData.chunk_index,\n    original_url: chunkData.original_url,\n    total_chunks: chunkData.total_chunks,\n    \n    // Analysis data\n    title: analysisData.title,\n    summary: analysisData.summary,\n    category: analysisData.category,\n    tags: analysisData.tags,\n    key_concepts: analysisData.key_concepts,\n    content_type: analysisData.content_type,\n    technical_level: analysisData.technical_level,\n    \n    // Embedding\n    embedding: embedding\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[120,320],"id":"262a7874-daad-45d6-a93a-74ee367c337b","name":"Extract Embedding"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/embeddings","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type ","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify({ model: \"text-embedding-3-small\", input: $('Text Chunker').item.json.chunk_text }) }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-280,320],"id":"176c3804-c38f-4192-8cb7-15557b4b413a","name":"HTTP Request2","credentials":{"openAiApi":{"id":"ch5f5peXcVJq7Hem","name":"OpenAi account"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/embeddings","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"model","value":"text-embedding-3-small"},{"name":"input","value":"={{ $('Text Chunker').item.json.chunk_text }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-80,500],"id":"ec15d055-9b8a-419b-893e-3cab64b60c47","name":"HTTP Request3","credentials":{"openAiApi":{"id":"ch5f5peXcVJq7Hem","name":"OpenAi account"}}},{"parameters":{"method":"PUT","url":"https://c4c8ee46-d9dd-4c0f-a00e-9215675351da.us-west-1-0.aws.cloud.qdrant.io/collections/autollama-content/points","sendHeaders":true,"headerParameters":{"parameters":[{"name":"api-key","value":" [QDRANT_API_KEY_REMOVED]"},{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"contentType":"raw","body":"={{   (() => {     const data = $json;     return JSON.stringify({       points: [{         id: data.chunk_id,         vector: data.embedding,         payload: {           url: data.original_url,           title: data.title,           chunk_text: data.chunk_text,           chunk_index: data.chunk_index,           summary: data.summary,           category: data.category,           tags: data.tags,           key_concepts: data.key_concepts,           content_type: data.content_type,           technical_level: data.technical_level,           processed_date: new Date().toISOString()         }       }]     });   })() }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[340,520],"id":"ee844e8a-0d53-48b3-99f2-a48980994f12","name":"Store in Qdrant","alwaysOutputData":true}],"connections":{"HTTP Request":{"main":[[{"node":"Markdown","type":"main","index":0}]]},"Markdown":{"main":[[{"node":"Text Chunker","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Message a model":{"main":[[{"node":"HTTP Request2","type":"main","index":0}]]},"Prepare Airtable Data":{"main":[[{"node":"Create a record","type":"main","index":0}]]},"Text Chunker":{"main":[[{"node":"Message a model","type":"main","index":0}]]},"Extract Embedding":{"main":[[{"node":"Store in Qdrant","type":"main","index":0},{"node":"Prepare Airtable Data","type":"main","index":0}]]},"HTTP Request2":{"main":[[{"node":"Extract Embedding","type":"main","index":0},{"node":"HTTP Request3","type":"main","index":0}]]},"HTTP Request3":{"main":[[{"node":"Extract Embedding","type":"main","index":0}]]},"Store in Qdrant":{"main":[[{"node":"Prepare Airtable Data","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Prepare Airtable Data":[{"json":{"name":"First item","code":1}},{"json":{"name":"Second item","code":2}}],"Webhook":[{"json":{"headers":{"host":"n8n.llam.ai","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Safari/605.1.15","content-length":"203","accept":"*/*","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","content-type":"application/json","origin":"https://autollama.io","priority":"u=3, i","referer":"https://autollama.io/","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site","via":"2.0 Caddy","x-autollama-version":"1.0","x-forwarded-for":"104.11.115.145","x-forwarded-host":"n8n.llam.ai","x-forwarded-proto":"https","x-session-id":"session_1752443590905_0k7xw82gq"},"params":{},"query":{},"body":{"url":"https://www.americanyawp.com/text/10-religion-and-reform/","timestamp":"2025-07-13T21:53:21.108Z","source":"autollama.io","environment":"production","sessionId":"session_1752443590905_0k7xw82gq"},"webhookUrl":"https://n8n.llam.ai/webhook/8c4cba6c-89aa-4f09-8b51-62d4a422ebba","executionMode":"production"}}]},"versionId":"2bf64d37-f07b-42af-a1b7-2e7c99a6e75a","triggerCount":1,"tags":[]}]
